import{j as e,c as J,B as _e}from"./button.CDive8EV.js";import{r as c,R as ne}from"./index.D4lIrffr.js";import{C as _,c as P,a as D,b as $,d as Pe}from"./card.Dfef4M5o.js";import{c as ae,v as Le,j as re,P as L,e as T,u as De,w as oe,i as ie,x as $e,b as Me,S as X,l as Z,m as ee,n as te,o as k,T as G,p as B,q as u,r as C,s as O,t as a}from"./select.D9mAUHDS.js";import{c as ke}from"./client.DU9XfzbK.js";var Y="rovingFocusGroup.onEntryFocus",Ge={bubbles:!1,cancelable:!0},M="RovingFocusGroup",[z,ce,Be]=Le(M),[Oe,le]=ae(M,[Be]),[Ve,Ke]=Oe(M),de=c.forwardRef((t,s)=>e.jsx(z.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(z.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Ue,{...t,ref:s})})}));de.displayName=M;var Ue=c.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:i,orientation:n,loop:h=!1,dir:j,currentTabStopId:l,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:r=!1,...b}=t,m=c.useRef(null),S=De(s,m),E=oe(j),[A,g]=ie({prop:l,defaultProp:v??null,onChange:d,caller:M}),[F,R]=c.useState(!1),x=$e(p),f=ce(i),o=c.useRef(!1),[N,w]=c.useState(0);return c.useEffect(()=>{const y=m.current;if(y)return y.addEventListener(Y,x),()=>y.removeEventListener(Y,x)},[x]),e.jsx(Ve,{scope:i,orientation:n,dir:E,loop:h,currentTabStopId:A,onItemFocus:c.useCallback(y=>g(y),[g]),onItemShiftTab:c.useCallback(()=>R(!0),[]),onFocusableItemAdd:c.useCallback(()=>w(y=>y+1),[]),onFocusableItemRemove:c.useCallback(()=>w(y=>y-1),[]),children:e.jsx(L.div,{tabIndex:F||N===0?-1:0,"data-orientation":n,...b,ref:S,style:{outline:"none",...t.style},onMouseDown:T(t.onMouseDown,()=>{o.current=!0}),onFocus:T(t.onFocus,y=>{const Se=!o.current;if(y.target===y.currentTarget&&Se&&!F){const W=new CustomEvent(Y,Ge);if(y.currentTarget.dispatchEvent(W),!W.defaultPrevented){const q=f().filter(I=>I.focusable),Ee=q.find(I=>I.active),Ae=q.find(I=>I.id===A),Re=[Ee,Ae,...q].filter(Boolean).map(I=>I.ref.current);me(Re,r)}}o.current=!1}),onBlur:T(t.onBlur,()=>R(!1))})})}),ue="RovingFocusGroupItem",he=c.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:i,focusable:n=!0,active:h=!1,tabStopId:j,children:l,...v}=t,d=re(),p=j||d,r=Ke(ue,i),b=r.currentTabStopId===p,m=ce(i),{onFocusableItemAdd:S,onFocusableItemRemove:E,currentTabStopId:A}=r;return c.useEffect(()=>{if(n)return S(),()=>E()},[n,S,E]),e.jsx(z.ItemSlot,{scope:i,id:p,focusable:n,active:h,children:e.jsx(L.span,{tabIndex:b?0:-1,"data-orientation":r.orientation,...v,ref:s,onMouseDown:T(t.onMouseDown,g=>{n?r.onItemFocus(p):g.preventDefault()}),onFocus:T(t.onFocus,()=>r.onItemFocus(p)),onKeyDown:T(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){r.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const F=He(g,r.orientation,r.dir);if(F!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=m().filter(f=>f.focusable).map(f=>f.ref.current);if(F==="last")x.reverse();else if(F==="prev"||F==="next"){F==="prev"&&x.reverse();const f=x.indexOf(g.currentTarget);x=r.loop?ze(x,f+1):x.slice(f+1)}setTimeout(()=>me(x))}}),children:typeof l=="function"?l({isCurrentTabStop:b,hasTabStop:A!=null}):l})})});he.displayName=ue;var qe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ye(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function He(t,s,i){const n=Ye(t.key,i);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return qe[n]}function me(t,s=!1){const i=document.activeElement;for(const n of t)if(n===i||(n.focus({preventScroll:s}),document.activeElement!==i))return}function ze(t,s){return t.map((i,n)=>t[(s+n)%t.length])}var Je=de,Qe=he,U="Tabs",[We,lt]=ae(U,[le]),xe=le(),[Xe,Q]=We(U),fe=c.forwardRef((t,s)=>{const{__scopeTabs:i,value:n,onValueChange:h,defaultValue:j,orientation:l="horizontal",dir:v,activationMode:d="automatic",...p}=t,r=oe(v),[b,m]=ie({prop:n,onChange:h,defaultProp:j??"",caller:U});return e.jsx(Xe,{scope:i,baseId:re(),value:b,onValueChange:m,orientation:l,dir:r,activationMode:d,children:e.jsx(L.div,{dir:r,"data-orientation":l,...p,ref:s})})});fe.displayName=U;var be="TabsList",ge=c.forwardRef((t,s)=>{const{__scopeTabs:i,loop:n=!0,...h}=t,j=Q(be,i),l=xe(i);return e.jsx(Je,{asChild:!0,...l,orientation:j.orientation,dir:j.dir,loop:n,children:e.jsx(L.div,{role:"tablist","aria-orientation":j.orientation,...h,ref:s})})});ge.displayName=be;var je="TabsTrigger",ve=c.forwardRef((t,s)=>{const{__scopeTabs:i,value:n,disabled:h=!1,...j}=t,l=Q(je,i),v=xe(i),d=ye(l.baseId,n),p=we(l.baseId,n),r=n===l.value;return e.jsx(Qe,{asChild:!0,...v,focusable:!h,active:r,children:e.jsx(L.button,{type:"button",role:"tab","aria-selected":r,"aria-controls":p,"data-state":r?"active":"inactive","data-disabled":h?"":void 0,disabled:h,id:d,...j,ref:s,onMouseDown:T(t.onMouseDown,b=>{!h&&b.button===0&&b.ctrlKey===!1?l.onValueChange(n):b.preventDefault()}),onKeyDown:T(t.onKeyDown,b=>{[" ","Enter"].includes(b.key)&&l.onValueChange(n)}),onFocus:T(t.onFocus,()=>{const b=l.activationMode!=="manual";!r&&!h&&b&&l.onValueChange(n)})})})});ve.displayName=je;var pe="TabsContent",Ne=c.forwardRef((t,s)=>{const{__scopeTabs:i,value:n,forceMount:h,children:j,...l}=t,v=Q(pe,i),d=ye(v.baseId,n),p=we(v.baseId,n),r=n===v.value,b=c.useRef(r);return c.useEffect(()=>{const m=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(Me,{present:h||r,children:({present:m})=>e.jsx(L.div,{"data-state":r?"active":"inactive","data-orientation":v.orientation,role:"tabpanel","aria-labelledby":d,hidden:!m,id:p,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:b.current?"0s":void 0},children:m&&j})})});Ne.displayName=pe;function ye(t,s){return`${t}-trigger-${s}`}function we(t,s){return`${t}-content-${s}`}var Ze=fe,Fe=ge,Te=ve,Ce=Ne;const et=Ze,Ie=c.forwardRef(({className:t,...s},i)=>e.jsx(Fe,{ref:i,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Ie.displayName=Fe.displayName;const V=c.forwardRef(({className:t,...s},i)=>e.jsx(Te,{ref:i,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));V.displayName=Te.displayName;const K=c.forwardRef(({className:t,...s},i)=>e.jsx(Ce,{ref:i,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));K.displayName=Ce.displayName;const tt={},H=tt?.PUBLIC_API_URL||"http://localhost:8787";function st(){const[t,s]=c.useState(!1),[i,n]=c.useState(null),[h,j]=c.useState("current"),[l,v]=c.useState(new Date().getFullYear().toString()),[d,p]=c.useState(null),[r,b]=c.useState(null),[m,S]=c.useState(null),E=Array.from({length:5},(o,N)=>{const w=new Date().getFullYear()-N;return{value:w.toString(),label:w.toString()}}),A=async()=>{try{s(!0),n(null);const o=await fetch(`${H}/api/reports/balance-sheet?year=${l}&period=${h}`);if(!o.ok)throw new Error(`Failed to fetch balance sheet: ${o.statusText}`);const N=await o.json();p(N)}catch(o){n(o instanceof Error?o.message:"Failed to fetch balance sheet")}finally{s(!1)}},g=async()=>{try{s(!0),n(null);const o=await fetch(`${H}/api/reports/income-statement?year=${l}&period=${h}`);if(!o.ok)throw new Error(`Failed to fetch income statement: ${o.statusText}`);const N=await o.json();b(N)}catch(o){n(o instanceof Error?o.message:"Failed to fetch income statement")}finally{s(!1)}},F=async()=>{try{s(!0),n(null);const o=await fetch(`${H}/api/reports/cash-flow?year=${l}&period=${h}`);if(!o.ok)throw new Error(`Failed to fetch cash flow: ${o.statusText}`);const N=await o.json();S(N)}catch(o){n(o instanceof Error?o.message:"Failed to fetch cash flow")}finally{s(!1)}},R=async()=>{await Promise.all([A(),g(),F()])};c.useEffect(()=>{R()},[l,h]);const x=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),f=(o,N=0)=>o.map(w=>e.jsxs(ne.Fragment,{children:[e.jsxs(u,{className:N>0?"bg-gray-50":"",children:[e.jsx(a,{style:{paddingLeft:`${16+N*20}px`},children:w.name}),e.jsx(a,{className:"text-right font-mono",children:w.formattedAmount||x(w.amount)})]}),w.children&&f(w.children,N+1)]},w.id));return t?e.jsx(_,{children:e.jsx(P,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-gray-500",children:"Loading financial statements..."})})})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(_,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx($,{children:"Financial Statements"}),e.jsx(Pe,{children:"View Balance Sheet, Income Statement, and Cash Flow reports"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(X,{value:l,onValueChange:v,children:[e.jsx(Z,{className:"w-32",children:e.jsx(ee,{placeholder:"Year"})}),e.jsx(te,{children:E.map(o=>e.jsx(k,{value:o.value,children:o.label},o.value))})]}),e.jsxs(X,{value:h,onValueChange:j,children:[e.jsx(Z,{className:"w-40",children:e.jsx(ee,{placeholder:"Period"})}),e.jsxs(te,{children:[e.jsx(k,{value:"current",children:"Current Period"}),e.jsx(k,{value:"ytd",children:"Year to Date"}),e.jsx(k,{value:"annual",children:"Annual"})]})]}),e.jsx(_e,{onClick:R,variant:"outline",children:"Refresh"})]})]})}),e.jsxs(P,{children:[i&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-800",children:i})}),e.jsxs(et,{defaultValue:"balance-sheet",className:"w-full",children:[e.jsxs(Ie,{className:"grid w-full grid-cols-3",children:[e.jsx(V,{value:"balance-sheet",children:"Balance Sheet"}),e.jsx(V,{value:"income-statement",children:"Income Statement"}),e.jsx(V,{value:"cash-flow",children:"Cash Flow"})]}),e.jsx(K,{value:"balance-sheet",className:"space-y-6",children:d?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(D,{children:e.jsx($,{className:"text-lg",children:"Assets"})}),e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(B,{children:e.jsxs(u,{children:[e.jsx(C,{children:"Account"}),e.jsx(C,{className:"text-right",children:"Amount"})]})}),e.jsxs(O,{children:[d.assets.currentAssets.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-blue-50",children:[e.jsx(a,{className:"font-semibold",children:"Current Assets"}),e.jsx(a,{})]}),f(d.assets.currentAssets,1)]}),d.assets.nonCurrentAssets.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-blue-50",children:[e.jsx(a,{className:"font-semibold",children:"Non-Current Assets"}),e.jsx(a,{})]}),f(d.assets.nonCurrentAssets,1)]}),e.jsxs(u,{className:"border-t-2 border-gray-300 font-bold",children:[e.jsx(a,{children:"Total Assets"}),e.jsx(a,{className:"text-right font-mono",children:x(d.assets.totalAssets)})]})]})]})})]}),e.jsxs(_,{children:[e.jsx(D,{children:e.jsx($,{className:"text-lg",children:"Liabilities & Equity"})}),e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(B,{children:e.jsxs(u,{children:[e.jsx(C,{children:"Account"}),e.jsx(C,{className:"text-right",children:"Amount"})]})}),e.jsxs(O,{children:[d.liabilities.currentLiabilities.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-red-50",children:[e.jsx(a,{className:"font-semibold",children:"Current Liabilities"}),e.jsx(a,{})]}),f(d.liabilities.currentLiabilities,1)]}),d.liabilities.nonCurrentLiabilities.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-red-50",children:[e.jsx(a,{className:"font-semibold",children:"Non-Current Liabilities"}),e.jsx(a,{})]}),f(d.liabilities.nonCurrentLiabilities,1)]}),e.jsxs(u,{className:"border-t border-gray-200 font-semibold",children:[e.jsx(a,{children:"Total Liabilities"}),e.jsx(a,{className:"text-right font-mono",children:x(d.liabilities.totalLiabilities)})]}),d.equity.items.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-purple-50",children:[e.jsx(a,{className:"font-semibold",children:"Equity"}),e.jsx(a,{})]}),f(d.equity.items,1)]}),e.jsxs(u,{className:"border-t border-gray-200 font-semibold",children:[e.jsx(a,{children:"Total Equity"}),e.jsx(a,{className:"text-right font-mono",children:x(d.equity.totalEquity)})]}),e.jsxs(u,{className:"border-t-2 border-gray-300 font-bold",children:[e.jsx(a,{children:"Total Liabilities & Equity"}),e.jsx(a,{className:"text-right font-mono",children:x(d.liabilities.totalLiabilities+d.equity.totalEquity)})]})]})]})})]})]}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No balance sheet data available"})}),e.jsx(K,{value:"income-statement",className:"space-y-6",children:r?e.jsxs(_,{children:[e.jsx(D,{children:e.jsx($,{className:"text-lg",children:"Income Statement"})}),e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(B,{children:e.jsxs(u,{children:[e.jsx(C,{children:"Account"}),e.jsx(C,{className:"text-right",children:"Amount"})]})}),e.jsxs(O,{children:[r.revenue.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-green-50",children:[e.jsx(a,{className:"font-semibold",children:"Revenue"}),e.jsx(a,{})]}),f(r.revenue,1),e.jsxs(u,{className:"border-t border-gray-200 font-semibold",children:[e.jsx(a,{children:"Total Revenue"}),e.jsx(a,{className:"text-right font-mono",children:x(r.totalRevenue)})]})]}),r.expenses.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-orange-50",children:[e.jsx(a,{className:"font-semibold",children:"Expenses"}),e.jsx(a,{})]}),f(r.expenses,1),e.jsxs(u,{className:"border-t border-gray-200 font-semibold",children:[e.jsx(a,{children:"Total Expenses"}),e.jsx(a,{className:"text-right font-mono",children:x(r.totalExpenses)})]})]}),e.jsxs(u,{className:"border-t-2 border-gray-300 font-bold",children:[e.jsx(a,{children:"Net Income"}),e.jsx(a,{className:`text-right font-mono ${r.netIncome>=0?"text-green-600":"text-red-600"}`,children:x(r.netIncome)})]})]})]})})]}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No income statement data available"})}),e.jsx(K,{value:"cash-flow",className:"space-y-6",children:m?e.jsxs(_,{children:[e.jsx(D,{children:e.jsx($,{className:"text-lg",children:"Cash Flow Statement"})}),e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(B,{children:e.jsxs(u,{children:[e.jsx(C,{children:"Activity"}),e.jsx(C,{className:"text-right",children:"Amount"})]})}),e.jsxs(O,{children:[m.operating.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-blue-50",children:[e.jsx(a,{className:"font-semibold",children:"Operating Activities"}),e.jsx(a,{})]}),f(m.operating,1)]}),m.investing.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-purple-50",children:[e.jsx(a,{className:"font-semibold",children:"Investing Activities"}),e.jsx(a,{})]}),f(m.investing,1)]}),m.financing.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"bg-green-50",children:[e.jsx(a,{className:"font-semibold",children:"Financing Activities"}),e.jsx(a,{})]}),f(m.financing,1)]}),e.jsxs(u,{className:"border-t-2 border-gray-300 font-bold",children:[e.jsx(a,{children:"Net Cash Flow"}),e.jsx(a,{className:`text-right font-mono ${m.netCashFlow>=0?"text-green-600":"text-red-600"}`,children:x(m.netCashFlow)})]})]})]})})]}):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No cash flow data available"})})]})]})]})})}const se=document.getElementById("financial-statements-root");se&&ke.createRoot(se).render(ne.createElement(st));
