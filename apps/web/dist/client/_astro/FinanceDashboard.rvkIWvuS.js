import{j as e,B as d}from"./button.C3-ZNafp.js";import{r as m}from"./index.D4lIrffr.js";import{C as N,a as $,b as F,c as C}from"./card.C6YY7AnU.js";class L{baseUrl;constructor(a="/api"){this.baseUrl=a}async analyzeTransaction(a){return this.makeRequest({type:"transaction-analysis",data:a})}async categorizeExpense(a,t){return this.makeRequest({type:"categorize-expense",data:{description:a,amount:t}})}async suggestCategorization(a,t,g){try{const x=await fetch("/api/categorization/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:a,amount:t,transactionId:g})});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);return await x.json()}catch(x){return console.error("Categorization suggestion error:",x),{success:!1,error:x instanceof Error?x.message:"Unknown error"}}}async getPendingSuggestions(){try{const a=await fetch("/api/categorization/pending");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Failed to fetch pending suggestions:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async approveSuggestion(a){try{const t=await fetch("/api/categorization/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suggestionId:a,approved:!0})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to approve suggestion:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async rejectSuggestion(a){try{const t=await fetch("/api/categorization/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suggestionId:a,approved:!1})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Failed to reject suggestion:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async getCategorizationHistory(){try{const a=await fetch("/api/categorization/history");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Failed to fetch categorization history:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async generateInsights(a){try{const t=await fetch(`${this.baseUrl}/ai-insights`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("AI Insights Client error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async analyzeDocument(a,t){return this.makeRequest({type:"analyze-document",data:{content:a,type:t}})}async detectFraud(a){return this.makeRequest({type:"fraud-detection",data:{transaction:a}})}async makeRequest(a){try{const t=await fetch(`${this.baseUrl}/ai-analysis`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("AI Client error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}}const R=new L;function H(){const[f,a]=m.useState("list"),[t,g]=m.useState([]),[x,D]=m.useState([]),[S,j]=m.useState(!1),[v,u]=m.useState([]),[b,T]=m.useState(!1),[o,w]=m.useState({description:"",reference:"",transactionDate:new Date}),[h,E]=m.useState([{accountId:"",description:"",debitAmount:0,creditAmount:0},{accountId:"",description:"",debitAmount:0,creditAmount:0}]);m.useEffect(()=>{D([{id:"1",code:"1000",name:"Cash",type:"ASSET",normalBalance:"DEBIT"},{id:"2",code:"1100",name:"Accounts Receivable",type:"ASSET",normalBalance:"DEBIT"},{id:"3",code:"2000",name:"Accounts Payable",type:"LIABILITY",normalBalance:"CREDIT"},{id:"4",code:"3000",name:"Owner Equity",type:"EQUITY",normalBalance:"CREDIT"},{id:"5",code:"4000",name:"Revenue",type:"REVENUE",normalBalance:"CREDIT"},{id:"6",code:"5000",name:"Operating Expenses",type:"EXPENSE",normalBalance:"DEBIT"}]),g([{id:"1",date:"2024-01-15",description:"Office Supplies Purchase",reference:"REF-001",status:"POSTED",entries:[{accountId:6,debitAmount:25e4,creditAmount:0,description:"Office supplies"},{accountId:1,debitAmount:0,creditAmount:25e4,description:"Cash payment"}]}])},[]);const i=async(s,c)=>{if(s.trim()){T(!0);try{const n=await R.suggestCategorization(s,c);if(n.success&&n.suggestion){const{suggestedCategory:p,confidence:I,reasoning:z}=n.suggestion;u([{type:"info",message:`AI suggests: ${p} (${Math.round(I*100)}% confidence). Check the Categorization Manager to approve or reject this suggestion.`,confidence:I}]),z&&u(B=>[...B,{type:"info",message:`Reasoning: ${z}`,confidence:I}])}else u([{type:"error",message:n.error||"Failed to generate categorization suggestion",confidence:0}])}catch(n){console.error("Smart categorization error:",n),u([{type:"error",message:"Failed to connect to categorization service",confidence:0}])}finally{T(!1)}}},l=async s=>{try{const c=await R.detectFraud(s);if(c.success&&c.result){const{riskScore:n,flags:p}=c.result;n>.7?u(I=>[...I,{type:"error",message:`⚠️ High fraud risk detected: ${p?.join(", ")}`,confidence:n}]):n>.4&&u(I=>[...I,{type:"warning",message:`⚠️ Moderate fraud risk: ${p?.join(", ")}`,confidence:n}])}}catch(c){console.error("Fraud detection error:",c)}},y=async()=>{if(o.description.trim()){T(!0);try{const s={description:o.description,amount:h.reduce((n,p)=>n+p.debitAmount,0),entries:h.filter(n=>n.accountId&&(n.debitAmount>0||n.creditAmount>0)),date:o.transactionDate},c=await R.analyzeTransaction(s);if(c.success&&c.result){const{analysis:n,suggestions:p,compliance:I}=c.result,z=[];n?.confidence>.8&&z.push({type:"info",message:"✅ Transaction structure looks correct",confidence:n.confidence}),p?.length>0&&p.forEach(B=>{z.push({type:"warning",message:`💡 Suggestion: ${B}`,confidence:.7})}),I?.issues?.length>0&&I.issues.forEach(B=>{z.push({type:"error",message:`❌ Compliance issue: ${B}`,confidence:.9})}),u(z),await l(s)}}catch(s){console.error("Transaction analysis error:",s)}finally{T(!1)}}},r=()=>{E([...h,{accountId:"",description:"",debitAmount:0,creditAmount:0}])},k=s=>{h.length>2&&E(h.filter((c,n)=>n!==s))},A=(s,c,n)=>{const p=[...h];p[s]={...p[s],[c]:n},E(p)},O=()=>{const s=h.reduce((n,p)=>n+(p.debitAmount||0),0),c=h.reduce((n,p)=>n+(p.creditAmount||0),0);return{totalDebits:s,totalCredits:c,isBalanced:Math.abs(s-c)<.01}},U=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),M=async()=>{j(!0);try{if(!O().isBalanced){alert("Transaction must be balanced! Total debits must equal total credits.");return}if(!o.description?.trim()){alert("Please enter a transaction description.");return}const c=h.filter(n=>n.accountId&&(n.debitAmount>0||n.creditAmount>0));if(c.length<2){alert("Transaction must have at least 2 entries.");return}console.log("Creating transaction:",{description:o.description,reference:o.reference,transactionDate:o.transactionDate,entries:c}),w({description:"",reference:"",transactionDate:new Date}),E([{accountId:"",description:"",debitAmount:0,creditAmount:0},{accountId:"",description:"",debitAmount:0,creditAmount:0}]),u([]),a("list"),alert("Transaction created successfully!")}catch(s){console.error("Error creating transaction:",s),alert("Error creating transaction. Please try again.")}finally{j(!1)}},P=O();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Transaction Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage financial transactions with AI assistance"})]})}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx("button",{onClick:()=>a("list"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${f==="list"?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Transaction History"}),e.jsx("button",{onClick:()=>a("create"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${f==="create"?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"New Transaction"}),e.jsx("button",{onClick:()=>a("accounts"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${f==="accounts"?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Chart of Accounts"})]}),f==="list"&&e.jsxs(N,{children:[e.jsx($,{children:e.jsx(F,{children:"Recent Transactions"})}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Date"}),e.jsx("th",{className:"text-left p-2",children:"Description"}),e.jsx("th",{className:"text-left p-2",children:"Reference"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-right p-2",children:"Amount"}),e.jsx("th",{className:"text-center p-2",children:"AI Analysis"}),e.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2",children:s.date}),e.jsx("td",{className:"p-2",children:s.description}),e.jsx("td",{className:"p-2 text-sm text-gray-600",children:s.reference||"-"}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.status==="POSTED"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})}),e.jsx("td",{className:"p-2 text-right font-medium",children:U(s.entries.reduce((c,n)=>c+n.debitAmount,0))}),e.jsx("td",{className:"p-2 text-center",children:s.aiAnalysis?.riskScore?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.aiAnalysis.riskScore>.7?"bg-red-100 text-red-800":s.aiAnalysis.riskScore>.4?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.aiAnalysis.riskScore>.7?"High Risk":s.aiAnalysis.riskScore>.4?"Medium Risk":"Low Risk"}):e.jsx("span",{className:"text-gray-400 text-xs",children:"Not analyzed"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(d,{variant:"outline",size:"sm",children:"View"})})]},s.id))})]})})})]}),f==="create"&&e.jsxs(N,{children:[e.jsx($,{children:e.jsxs(F,{className:"flex items-center justify-between",children:["Create New Transaction",e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:()=>i(o.description,h.reduce((s,c)=>s+c.debitAmount,0)),variant:"outline",size:"sm",disabled:b||!o.description.trim(),className:"bg-blue-50 hover:bg-blue-100 text-blue-700",children:b?"🤖 Analyzing...":"🤖 Smart Categorize"}),e.jsx(d,{onClick:y,variant:"outline",size:"sm",disabled:b||!o.description.trim(),className:"bg-purple-50 hover:bg-purple-100 text-purple-700",children:b?"🔍 Analyzing...":"🔍 AI Analysis"})]})]})}),e.jsxs(C,{className:"space-y-6",children:[v.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"AI Insights"}),v.map((s,c)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${s.type==="error"?"bg-red-50 border-red-400 text-red-700":s.type==="warning"?"bg-yellow-50 border-yellow-400 text-yellow-700":"bg-blue-50 border-blue-400 text-blue-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:s.message}),e.jsxs("span",{className:"text-xs opacity-75",children:[Math.round(s.confidence*100),"% confidence"]})]})},c)),e.jsx(d,{onClick:()=>u([]),variant:"outline",size:"sm",className:"text-xs",children:"Clear Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("input",{type:"text",value:o.description,onChange:s=>w({...o,description:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter transaction description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("input",{type:"text",value:o.reference||"",onChange:s=>w({...o,reference:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional reference"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:o.transactionDate?.toISOString().split("T")[0]||"",onChange:s=>w({...o,transactionDate:new Date(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Journal Entries"}),e.jsx(d,{onClick:r,variant:"outline",size:"sm",children:"+ Add Entry"})]}),e.jsx("div",{className:"space-y-3",children:h.map((s,c)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Account"}),e.jsxs("select",{value:s.accountId,onChange:n=>A(c,"accountId",n.target.value),className:"w-full px-2 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Account"}),x.map(n=>e.jsxs("option",{value:n.id,children:[n.code," - ",n.name]},n.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:s.description||"",onChange:n=>A(c,"description",n.target.value),className:"w-full px-2 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Entry description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Debit"}),e.jsx("input",{type:"number",value:s.debitAmount||"",onChange:n=>A(c,"debitAmount",parseFloat(n.target.value)||0),className:"w-full px-2 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Credit"}),e.jsx("input",{type:"number",value:s.creditAmount||"",onChange:n=>A(c,"creditAmount",parseFloat(n.target.value)||0),className:"w-full px-2 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0",step:"0.01"})]}),e.jsx("div",{className:"flex items-end",children:h.length>2&&e.jsx(d,{onClick:()=>k(c),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Remove"})})]},c))}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Debits:"}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:U(P.totalDebits)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Credits:"}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:U(P.totalCredits)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Balance Status:"}),e.jsx("div",{className:`text-lg font-bold ${P.isBalanced?"text-green-600":"text-red-600"}`,children:P.isBalanced?"✓ Balanced":"✗ Unbalanced"})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(d,{onClick:M,disabled:!P.isBalanced||S,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400",children:S?"Creating...":"Create Transaction"}),e.jsx(d,{onClick:()=>a("list"),variant:"outline",children:"Cancel"})]})]})]})]}),f==="accounts"&&e.jsxs(N,{children:[e.jsx($,{children:e.jsxs(F,{className:"flex items-center justify-between",children:["Chart of Accounts",e.jsx(d,{variant:"outline",children:"+ Add Account"})]})}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Code"}),e.jsx("th",{className:"text-left p-2",children:"Account Name"}),e.jsx("th",{className:"text-left p-2",children:"Type"}),e.jsx("th",{className:"text-left p-2",children:"Normal Balance"}),e.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 font-mono",children:s.code}),e.jsx("td",{className:"p-2",children:s.name}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.type==="ASSET"?"bg-blue-100 text-blue-800":s.type==="LIABILITY"?"bg-red-100 text-red-800":s.type==="EQUITY"?"bg-purple-100 text-purple-800":s.type==="REVENUE"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.type})}),e.jsx("td",{className:"p-2",children:s.normalBalance}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(d,{variant:"outline",size:"sm",children:"Edit"})})]},s.id))})]})})})]})]})}function q({onSuggestionApproved:f,className:a=""}){const[t,g]=m.useState([]),[x,D]=m.useState(!1),[S,j]=m.useState(null),[v,u]=m.useState(new Set),b=async()=>{D(!0),j(null);try{const i=await R.getPendingSuggestions();i.success&&i.suggestions?g(i.suggestions):j(i.error||"Failed to load suggestions")}catch(i){j(i instanceof Error?i.message:"Unknown error")}finally{D(!1)}},T=async i=>{u(l=>new Set(l).add(i.id));try{const l=await R.approveSuggestion(i.id);l.success?(g(y=>y.filter(r=>r.id!==i.id)),f?.(i),j(null)):j(l.error||"Failed to approve suggestion")}catch(l){j(l instanceof Error?l.message:"Unknown error")}finally{u(l=>{const y=new Set(l);return y.delete(i.id),y})}},o=async i=>{u(l=>new Set(l).add(i.id));try{const l=await R.rejectSuggestion(i.id);l.success?(g(y=>y.filter(r=>r.id!==i.id)),j(null)):j(l.error||"Failed to reject suggestion")}catch(l){j(l instanceof Error?l.message:"Unknown error")}finally{u(l=>{const y=new Set(l);return y.delete(i.id),y})}};m.useEffect(()=>{b()},[]);const w=i=>`${Math.round(i*100)}%`,h=i=>i>=.8?"text-green-600":i>=.6?"text-yellow-600":"text-red-600",E=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i);return x&&t.length===0?e.jsx("div",{className:`p-4 ${a}`,children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading suggestions..."})]})}):t.length===0?e.jsx("div",{className:`p-4 ${a}`,children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 mb-2",children:"🎯"}),e.jsx("p",{className:"text-gray-600",children:"No pending categorization suggestions"}),e.jsx("button",{onClick:b,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm",children:"Refresh"})]})}):e.jsxs("div",{className:`p-4 ${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Categorization Suggestions (",t.length,")"]}),e.jsx("button",{onClick:b,disabled:x,className:"text-blue-600 hover:text-blue-800 text-sm disabled:opacity-50",children:x?"Refreshing...":"Refresh"})]}),S&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-700 text-sm",children:S})}),e.jsx("div",{className:"space-y-4",children:t.map(i=>{const l=v.has(i.id);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:i.description}),e.jsx("span",{className:"text-sm text-gray-500",children:E(i.amount)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Suggested Category:"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:i.suggestedCategory}),e.jsx("span",{className:`text-xs font-medium ${h(i.confidence)}`,children:w(i.confidence)})]}),i.reasoning&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.reasoning})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Created: ",new Date(i.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>T(i),disabled:l,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"...":"✓ Approve"}),e.jsx("button",{onClick:()=>o(i),disabled:l,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"...":"✗ Reject"})]})]})},i.id)})})]})}function G(){const[f,a]=m.useState("current"),[t,g]=m.useState("overview"),[x,D]=m.useState([]),[S,j]=m.useState([]),[v,u]=m.useState(!1),[b,T]=m.useState(!0),o=[{label:"Total Revenue",value:"$2,847,392",change:"+12.3%",trend:"up",aiInsight:"Revenue growth accelerating, on track to exceed Q4 targets by 8%"},{label:"Operating Expenses",value:"$1,923,847",change:"+5.7%",trend:"up",aiInsight:"Expense growth within acceptable range, consider optimization in office supplies"},{label:"Net Income",value:"$923,545",change:"+18.9%",trend:"up",aiInsight:"Strong profit margins, 15% above industry average"},{label:"Cash Flow",value:"$1,234,567",change:"-2.1%",trend:"down",aiInsight:"Temporary dip due to inventory investment, expected to normalize next month"}],w=[{id:"overview",name:"Overview",icon:"📊",hasAI:!0},{id:"gl",name:"General Ledger",icon:"📋",hasAI:!0},{id:"categorization",name:"AI Categorization",icon:"🎯",hasAI:!0},{id:"reports",name:"Financial Reports",icon:"📈",hasAI:!0},{id:"budget",name:"Budget & Forecast",icon:"💰",hasAI:!0},{id:"audit",name:"Audit Trail",icon:"🔍",hasAI:!0},{id:"entities",name:"Multi-Entity",icon:"🏢",hasAI:!1},{id:"ai-insights",name:"AI Insights",icon:"🤖",hasAI:!0}];m.useEffect(()=>{h(),E()},[f]);const h=async()=>{u(!0);try{const r=await R.generateInsights({period:f,metrics:o.map(k=>({label:k.label,value:k.value,change:k.change})),includeForecasting:!0,includeRiskAnalysis:!0});if(r.success&&r.result){const k=r.result.insights.map((A,O)=>({id:`insight-${O}`,type:A.type,title:A.title,description:A.description,confidence:A.confidence,priority:A.priority,timestamp:new Date}));D(k)}}catch(r){console.error("Error loading AI insights:",r)}finally{u(!1)}},E=async()=>{try{j([{id:"alert-1",type:"warning",message:"Q4 budget utilization at 87% with 2 months remaining",timestamp:new Date},{id:"alert-2",type:"info",message:"Monthly reconciliation completed successfully",timestamp:new Date}])}catch(r){console.error("Error loading financial alerts:",r)}},i=()=>{h()},l=r=>{switch(r){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},y=r=>{switch(r){case"opportunity":return"💡";case"risk":return"⚠️";case"compliance":return"📋";case"optimization":return"⚡";default:return"💡"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Corporate Finance Dashboard"}),e.jsx("p",{className:"text-slate-600",children:"AI-powered financial intelligence & corporate accounting"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:f,onChange:r=>a(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"current",children:"Current Month"}),e.jsx("option",{value:"quarter",children:"Current Quarter"}),e.jsx("option",{value:"year",children:"Current Year"})]}),e.jsx(d,{onClick:i,variant:"outline",disabled:v,className:"bg-purple-50 hover:bg-purple-100 text-purple-700",children:v?"🤖 Analyzing...":"🤖 Refresh AI"}),e.jsx(d,{variant:"outline",children:"Export Report"})]})]}),S.length>0&&e.jsx("div",{className:"space-y-2",children:S.map(r=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${r.type==="error"?"bg-red-50 border-red-400 text-red-700":r.type==="warning"?"bg-yellow-50 border-yellow-400 text-yellow-700":"bg-blue-50 border-blue-400 text-blue-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:r.message}),e.jsx("span",{className:"text-xs opacity-75",children:r.timestamp.toLocaleTimeString()})]})},r.id))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:w.map(r=>e.jsx(N,{className:`cursor-pointer transition-all hover:shadow-md ${t===r.id?"ring-2 ring-blue-500 bg-blue-50":""}`,onClick:()=>g(r.id),children:e.jsxs(C,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl mb-2",children:[r.icon,r.hasAI&&e.jsx("span",{className:"text-xs ml-1",children:"🤖"})]}),e.jsx("div",{className:"text-sm font-medium",children:r.name})]})},r.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(r=>e.jsx(N,{className:"relative overflow-hidden",children:e.jsxs(C,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:r.label}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:r.value})]}),e.jsx("div",{className:`text-sm font-medium ${r.trend==="up"?"text-green-600":r.trend==="down"?"text-red-600":"text-slate-600"}`,children:r.change})]}),r.aiInsight&&b&&e.jsx("div",{className:"mt-3 p-2 bg-purple-50 rounded-md border-l-2 border-purple-300",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-xs",children:"🤖"}),e.jsx("p",{className:"text-xs text-purple-700 leading-relaxed",children:r.aiInsight})]})})]})},r.label))}),e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{onClick:()=>T(!b),variant:"outline",size:"sm",className:b?"bg-purple-100 text-purple-700":"",children:b?"Hide AI Insights":"Show AI Insights"})}),e.jsxs(N,{children:[e.jsx($,{children:e.jsxs(F,{className:"flex items-center justify-between",children:[w.find(r=>r.id===t)?.name||"Overview",w.find(r=>r.id===t)?.hasAI&&e.jsx("span",{className:"text-sm text-purple-600 font-normal",children:"AI-Enhanced"})]})}),e.jsxs(C,{children:[t==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-slate-600",children:"Welcome to your AI-powered Corporate Finance Dashboard. Get intelligent insights and automated analysis."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 flex items-center gap-2",children:"📊 Recent Activity"}),e.jsx("p",{className:"text-sm text-blue-700",children:"5 journal entries pending approval"}),e.jsx("p",{className:"text-sm text-blue-700",children:"3 AI-flagged transactions for review"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 flex items-center gap-2",children:"✅ Compliance Status"}),e.jsx("p",{className:"text-sm text-green-700",children:"All reports up to date"}),e.jsx("p",{className:"text-sm text-green-700",children:"AI compliance check: 98% score"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(d,{variant:"outline",onClick:()=>g("gl"),children:"📝 New Transaction"}),e.jsx(d,{variant:"outline",onClick:()=>g("reports"),children:"📊 Generate Report"}),e.jsx(d,{variant:"outline",onClick:()=>g("ai-insights"),children:"🤖 AI Analysis"}),e.jsx(d,{variant:"outline",onClick:()=>g("budget"),children:"💰 Budget Review"})]})]})]}),t==="gl"&&e.jsx(H,{}),t==="categorization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Transaction Categorization"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Review and approve AI-suggested transaction categories"})]}),e.jsx(q,{onSuggestionApproved:r=>{console.log("Suggestion approved:",r)},className:"bg-white rounded-lg shadow-sm"})]}),t==="ai-insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Financial Insights"}),e.jsx(d,{onClick:i,variant:"outline",size:"sm",disabled:v,children:v?"Refreshing...":"Refresh"})]}),v?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"AI is analyzing your financial data..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(r=>e.jsx(N,{className:"border-l-4 border-purple-400",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:y(r.type)}),e.jsx("h4",{className:"font-semibold text-gray-900",children:r.title})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${l(r.priority)}`,children:r.priority})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Confidence: ",Math.round(r.confidence*100),"%"]}),e.jsx("span",{children:r.timestamp.toLocaleDateString()})]})]})},r.id))}),x.length===0&&!v&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:'No AI insights available. Click "Refresh" to generate new insights.'})})]}),t==="reports"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-slate-600",children:"AI-Enhanced Financial Reports & Statements"}),e.jsx(d,{variant:"outline",size:"sm",className:"bg-purple-50 text-purple-700",children:"🤖 AI Report Builder"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(N,{className:"p-4 hover:shadow-md cursor-pointer",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"📊"}),e.jsx("h4",{className:"font-medium",children:"P&L Statement"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AI insights included"})]})}),e.jsx(N,{className:"p-4 hover:shadow-md cursor-pointer",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🏦"}),e.jsx("h4",{className:"font-medium",children:"Balance Sheet"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Real-time analysis"})]})}),e.jsx(N,{className:"p-4 hover:shadow-md cursor-pointer",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"💰"}),e.jsx("h4",{className:"font-medium",children:"Cash Flow"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Predictive modeling"})]})})]})]}),t==="budget"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Budget & Forecast"}),e.jsx(d,{variant:"outline",size:"sm",className:"bg-purple-50 text-purple-700",children:"🤖 Generate Forecast"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(N,{children:[e.jsx($,{children:e.jsx(F,{className:"text-lg",children:"Budget vs Actual"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Revenue"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"+8% vs budget"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Expenses"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"+3% vs budget"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Net Income"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"+12% vs budget"})]})]})})]}),e.jsxs(N,{children:[e.jsx($,{children:e.jsx(F,{className:"text-lg",children:"AI Forecast"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-700",children:"📈 Revenue projected to grow 15% next quarter"})}),e.jsx("div",{className:"p-3 bg-yellow-50 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"⚠️ Monitor office expenses - trending 8% above forecast"})})]})})]})]})]}),t==="audit"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Enhanced Audit Trail"}),e.jsx(d,{variant:"outline",size:"sm",className:"bg-purple-50 text-purple-700",children:"🤖 Anomaly Detection"})]}),e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx("p",{children:"🔍 AI-powered transaction monitoring and audit trail coming soon..."}),e.jsx("p",{className:"text-sm mt-2",children:"Features: Anomaly detection, compliance checking, automated reconciliation"})]})]}),t!=="overview"&&t!=="gl"&&t!=="reports"&&t!=="ai-insights"&&t!=="budget"&&t!=="audit"&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:e.jsxs("p",{children:['Module "',w.find(r=>r.id===t)?.name,'" coming soon...']})})]})]})]})}export{G as default};
